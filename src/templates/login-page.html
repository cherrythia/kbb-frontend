<!DOCTYPE html>
<html lang="en">


<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>NUS KBB Login Page</title>
  <link rel="stylesheet" href="/static/login-page.css">
  
</head>

<body>
  <main id="main-holder">
    
    <img src="/static/logo.jpg" alt="NUS-ISS Logo">
    <h1 id="login-header">NUS KBB Login Page</h1>
    
<!--     <div id="login-error-msg-holder" style="--opacityvalue : 0.0;">
      <p id="login-error-msg">Invalid username <span id="error-msg-second-line">and/or password</span></p>
    </div> -->
    
    <div id="test-msg-holder">
      <p id="test-msg">[For testing purpose, the default username and pw is admin]</p>
    </div>

    <form id="loginForm" action="">
      <input type="text" name="username" id="username-field" class="login-form-field" placeholder="Username">
      <br>
      <input type="password" name="password" id="password-field" class="login-form-field" placeholder="Password">
      <input type="button" onclick="check(this.form)" value="Login" id="login-form-submit">
    </form>
  
    <!-- Javascript to handle username and password auth checks -->
    <script> 
      function check(form)
      {
        let input_name = form.username.value;
        let input_pw =form.password.value;
        let result = true ;
      
        axios.post(BACKEND_HOST_URL.concat("/user"), {
          user_email: input_name,
          user_password: input_pw,
          
        }, {
          headers: {
            'content-type': 'application/json'
          }
        })
        .then((response) => {
          console.log(response.data);
          result=response.data;
        }, (error) => {
          console.log(error);
          });

        if (result == true) {
          
          // auth check pass, redirect to main page
          location.replace(BACKEND_HOST_URL.concat("/main"));
        } 
        else 
        {  
          // auth check fail, redirect to main page
          alert("Wrong username or pw submitted!");
          location.replace("http://localhost:3000")
        }
      };
    </script>


  </main>

  <script src="static/axios.min.js"></script>
  <script type="module" src="static/config.js"></script>

</body>

<!-- <h2>{{ message }}</h2> -->


</html>